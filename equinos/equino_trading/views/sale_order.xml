<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- tree view -->
        <record id="view_equine_trading_horses_tree" model="ir.ui.view">
            <field name="name">Quotations</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_quotation_tree"/>
            <field name="type">tree</field>
            <field name="priority" eval="8"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='state']" position="before">
                    <field name="service_type"/>
                    <field name="is_equine" widget='boolean_toggle'/>
                </xpath>
            </field>
        </record>

        <!-- form view -->
        <record id="view_equine_trading_horses_form" model="ir.ui.view">
            <field name="name">Quotation</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="type">form</field>
            <field name="priority" eval="8"/>
            <field name="arch" type="xml">

                <xpath expr="//div[1]/button[last()]" position="after">
                    <button class="oe_stat_button" type="object" name="action_view_track" icon="fa-plane"  attrs="{'invisible': [('project_id', '=', False)]}">
                       Track
                    </button>
                </xpath>  
                
                <xpath expr="//field[@name='partner_shipping_id']" position="before">
                    <field name="service_type" widget="radio"/>
                    <field name="is_equine" widget="boolean_toggle"/>
                </xpath>

                <field name="partner_shipping_id" position="attributes">
                    <attribute name="attrs">{'invisible': [('is_equine', '=', True)]}</attribute>
                </field>

                <xpath expr="//notebook/page[2]" position="before">

                    <page string="Trading" attrs="{'invisible': [('is_equine', '=', False)]}">

                        <group>
                            <field invisible="1" name="sequence_date" attrs="{'invisible': [('is_equine', '=', False)], 'required': [('is_equine', '=', True)]}"/>
                            <field invisible="1" string="Service Type" name="service_type" widget="radio" attrs="{'invisible': [('is_equine', '=', False)], 'required': [('is_equine', '=', True)]}"/>
                           
                            <group string="Fly">
                                <group>
                                    <field name="sequence_departure" attrs="{'invisible': [('is_equine', '=', False)], 'required': [('is_equine', '=', True)]}"/>
                                </group>
                                <group >
                                    <field name="sequence_arrive" attrs="{'invisible': [('is_equine', '=', False)], 'required': [('is_equine', '=', True)]}"/>
                                </group>
                                <group>
                                    <field name="trading_airline" attrs="{'invisible': [('is_equine', '=', False)]}"/>
                                </group>
                                <group>
                                    <field name="sequence_qty" attrs="{'invisible': [('is_equine', '=', False)]}"/>
                                </group>
                                 <group>
                                    <field name="sequence_specie" attrs="{'invisible': [('is_equine', '=', False)]}"/>
                                </group>
                            </group>


                        </group>

                        <group>
                            
                            <group string="Form">
                                <field name="opportunity_id" invisible="1"/>
                                <field name="form_id" domain="[['crf_crm_lead_id','=',opportunity_id]]" string=''/>
                                <div class="row">
                                    <div class="col-2" attrs="{'invisible': [('form_id','=',False)]}">
                                        <button string="" name="action_share_shipping_form" type="object" class="oe_highlight" data-hotkey="g">
                                            <i class="fa fa-paper-plane"/>
                                        </button>
                                    </div>
                                    <div class="row" attrs="{'invisible': [('form_id','!=',False)]}" style="margin-left:4px;">
                                        <div class="col-2">
                                            <button string="" name="action_create_shipping_form" type="object" class="oe_highlight" data-hotkey="g">
                                                <i class="fa fa-plus"/>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </group>

                            <group string="Project Tracking">
                                <field name="project_id" string=''/>
                                <button title='Track Form View' string="" name="action_view_track_form" type="object" class="oe_highlight" data-hotkey="g"  attrs="{'invisible': [('project_id','=',False)]}">
                                    <i class='fa fa-th-list'/>
                                </button>
                            </group>

                        </group>
                        

                        <group string="Folders">
                            <field name="certificates_regulates_folders_ids" widget="many2many"/>
                        </group>

                        <group string="Share Documents">
                            
                            
                            <div class="col-4">
                                <field name='share_type' widget='radio'/>
                            </div>
                            <div class="col-4">
                                <button string="Share" name="action_share_folder_documents" type="object" class="oe_highlight" data-hotkey="g" attrs="{'invisible': [('certificates_regulates_folders_ids','=',False)]}">
                                    <i class="fa fa-paper-plane"/>
                                </button>
                            </div>

                            <field name="receips_ids" attrs="{'invisible': [('share_type','=','customer')]}">
                                <tree>
                                    <field name='name'/>
                                    <field name='contact_ids' widget='many2many_tags'/>
                                </tree>
                            </field>

                            <field string='Files to Include' name='certificates_regulates_ids' widget='many2many_tags' domain="[['id','in',filter_certificates_regulates_ids]]"/>
                            <field string='' name='filter_certificates_regulates_ids' widget='many2many_tags' invisible='1'/>

                        </group>
                        
                    </page>

                </xpath>

            </field>
        </record>

        <!-- action window -->
        <record id="action_so_qe_business" model="ir.actions.act_window">
            <field name="name">Exports Business</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.order</field>

            <field name="view_mode">kanban,tree,form,graph</field>
            <field name="context">{"search_default_fieldname":1}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                Click to add a new Quotation
                </p>
                <p>
                Click the Create button to add a new Quotation
                </p>
            </field>
        </record>

        <!-- action window -->
        <record id="action_so_qi_business" model="ir.actions.act_window">
            <field name="name">Imports Business</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.order</field>

            <field name="view_mode">kanban,tree,form,graph</field>
            <field name="context">{"search_default_fieldname":1}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                Click to add a new Quotation
                </p>
                <p>
                Click the Create button to add a new Quotation
                </p>
            </field>
        </record>

        <!-- action window -->
        <record id="action_so_se_business" model="ir.actions.act_window">
            <field name="name">Exports Business</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.order</field>

            <field name="view_mode">kanban,tree,form,graph</field>
            <field name="context">{"search_default_fieldname":1}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                Click to add a new Sale Exports
                </p>
                <p>
                Click the Create button to add a new Sale Exports
                </p>
            </field>
        </record>

        <!-- action window -->
        <record id="action_so_si_business" model="ir.actions.act_window">
            <field name="name">Import Business</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.order</field>

            <field name="view_mode">kanban,tree,form,graph</field>
            <field name="context">{"search_default_fieldname":1}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                Click to add a new Sale Imports
                </p>
                <p>
                Click the Create button to add a new Sale Imports
                </p>
            </field>
        </record>

    </data>
</odoo>